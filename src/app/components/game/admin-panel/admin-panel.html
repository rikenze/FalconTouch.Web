<app-notification
  [show]="showNotificationDialog"
  [message]="notificationMessage"
  [type]="notificationType"
  (dismiss)="showNotificationDialog = false">
</app-notification>

<div *ngIf="auth.isAdmin$ | async" class="admin-panel">
  <h2>Painel de Administracao</h2>

  <div *ngIf="currentGameId" class="game-info">
    <p><strong>ID do jogo atual:</strong> {{ currentGameId }}</p>
    <p><strong>Pagamentos confirmados:</strong> {{ playersPaidCount }}</p>
  </div>

  <form [formGroup]="configForm" (ngSubmit)="updateConfigs()" class="form-block">
    <label for="minPlayers">Numero minimo de jogadores:</label>
    <input id="minPlayers" type="number" formControlName="minPlayers" />
    <div *ngIf="configForm.controls['minPlayers'].invalid && configForm.controls['minPlayers'].touched" class="error">
      Valor invalido. Minimo 1.
    </div>

    <label for="price">Preco (R$):</label>
    <input id="price" type="number" step="0.01" formControlName="price" />
    <div *ngIf="configForm.controls['price'].invalid && configForm.controls['price'].touched" class="error">
      Preco invalido. Minimo R$ 0,01.
    </div>

    <label for="prizeDescription">Premio:</label>
    <input id="prizeDescription" type="text" formControlName="prizeDescription" />
    <div *ngIf="configForm.controls['prizeDescription'].invalid && configForm.controls['prizeDescription'].touched" class="error">
      Informe o premio.
    </div>

    <div class="form-block upload-container">
      <label for="uploadImagem">Adicionar nova imagem ao premio:</label>
      <input id="uploadImagem" type="file" (change)="upload($event)" accept="image/*" />
    </div>

    <button
      type="submit"
      [disabled]="configForm.invalid"
      style="background-color: #007bff; color: white; margin-top: 1rem;">
      Atualizar Configuracoes
    </button>
  </form>

  <div class="form-block center-button">
    <button (click)="toggleActive()" class="toggle-btn" [ngClass]="gameActive ? 'ativo' : 'inativo'">
      {{ gameActive ? 'Ativo' : 'Inativo' }}
    </button>
  </div>

  <form [formGroup]="startForm" (ngSubmit)="startGame()" class="form-block">
    <label for="numberOfButtons">Numero de botoes:</label>
    <input id="numberOfButtons" type="number" formControlName="numberOfButtons" />
    <div *ngIf="startForm.controls['numberOfButtons'].invalid && startForm.controls['numberOfButtons'].touched" class="error">
      Valor invalido. Minimo 2.
    </div>
    <button
      type="submit"
      [disabled]="startForm.invalid"
      style="color: #fff;">
      Iniciar jogo
    </button>
  </form>

  <p *ngIf="message" [ngClass]="messageType">{{ message }}</p>
</div>
