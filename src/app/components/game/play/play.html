
<app-admin-panel></app-admin-panel>

<app-notification
  *ngIf="notificationMessage"
  [message]="notificationMessage"
  [type]="notificationType">
</app-notification>

<app-ranking
  [visible]="rankingVisible"
  [data]="rankingList"
  (close)="rankingVisible = false">
</app-ranking>

<div class="wrapper">
  <header>
    <h1>FalconTouch!</h1>
    <p class="subtitle">Seja o primeiro a tocar e ganhe o prÃªmio!</p>

    <!-- Alerta de status do jogo -->
    <div *ngIf="!gameReleased" class="alert alert-danger">
      ğŸš« O jogo ainda nÃ£o comeÃ§ou. Aguarde...
    </div>
    <div *ngIf="gameReleased" class="alert alert-success">
      âœ… O jogo comeÃ§ou! Prepare-se para tocar!
    </div>

    <!-- Barra de progresso de jogadores -->
    <div *ngIf="isAdmin" class="player-progress-bar">
      <div class="progress-fill" [style.width.%]="(playersPaidCount / (minPlayers || 1)) * 100"></div>
    </div>
  </header>

  <main class="main-layout">
    <section class="game-container">
              <!-- TIMER DECRESCENTE -->
  <div class="countdown-modal" *ngIf="countdownModalVisible">
    <div class="countdown-number">
      {{ countdown }}
    </div>
  </div>

    <p class="prompt">Quando o botÃ£o "PREMIO!" aparecer, toque o mais rÃ¡pido que puder!</p>
      <div *ngIf="started" class="active-game buttons-grid">
        <button
          *ngFor="let btn of buttons; let i = index"
          class="btn btn-click"
          [disabled]="i !== winningButtonIndex"
          (click)="i === winningButtonIndex ? clickButton(winningButtonIndex) : null">
          {{ i === winningButtonIndex ? 'PREMIO!' : 'PREMO!' }}
        </button>
      </div>

      <div *ngIf="isWinner" class="winner-announcement">
        <h2>ğŸ‰ ParabÃ©ns, <span class="winner-name">{{ winner }}</span>! ğŸ‰</h2>
        <p>VocÃª foi o primeiro a tocar e ganhou o prÃªmio! Entraremos em contato com vocÃª o mais breve possÃ­vel!</p>
        <!-- <button class="btn btn-reset" (click)="resetGame()">Jogar Novamente</button> -->
      </div>

      <div *ngIf="!isWinner && winner" class="loser-announcement">
        <h2>ğŸ˜” Infelizmente vocÃª nÃ£o foi o jogador mais rÃ¡pido.</h2>
        <p>Mas continue tentando! A prÃ³xima rodada pode ser sua!</p>
      </div>

      <!-- BotÃ£o para ver ranking -->
      <button
        *ngIf="winner"
        class="open-ranking-button" (click)="this.rankingVisible = true">
        ğŸ“ˆ Ver Ranking
      </button>
    </section>
  </main>

</div>
